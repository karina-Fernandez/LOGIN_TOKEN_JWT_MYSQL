<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"> <!-- Establece la codificación de caracteres como UTF-8 -->
  <title>Login</title> <!-- Título que aparece en la pestaña del navegador -->
  <link rel="stylesheet" href="/css/signin.css"> <!-- Hoja de estilos personalizada -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"> <!-- Bootstrap para estilos y diseño responsivo -->
</head>
<body class="text-center"> <!-- Aplica alineación centrada al texto del cuerpo -->

  <main class="form-signin w-100 m-auto"> <!-- Contenedor principal del formulario de inicio de sesión -->
    <form action="/login" method="POST"> <!-- Formulario que envía datos al servidor vía POST -->

      <h1 class="h3 mb-3 fw-normal">Por favor inicia sesión</h1> <!-- Título del formulario -->

      <!-- Campo para el nombre de usuario -->
      <div class="form-floating mb-2">
        <input type="text" class="form-control" id="user" name="user" placeholder="Usuario">
        <label for="user">Usuario</label>
      </div>

      <!-- Campo para la contraseña -->
      <div class="form-floating mb-2">
        <input type="password" class="form-control" id="pass" name="pass" placeholder="Contraseña">
        <label for="pass">Contraseña</label>
      </div>

      <!-- Botón para enviar el formulario -->
      <button class="w-100 btn btn-lg btn-primary" type="submit">Iniciar sesión</button>

      <!-- Enlace para ir a la página de registro -->
      <p class="mt-3 mb-0">¿No tienes cuenta?</p>
      <a href="/register" class="btn btn-outline-secondary w-100 mt-1">Registrarse</a>

    </form>
  </main>

  <!-- Sección condicional para mostrar alertas con SweetAlert2 si existe una variable "alert" -->
  <% if (alert) { %>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    Swal.fire({
      title: "<%= alertTitle %>",         // Título de la alerta
      text: "<%= alertMessage %>",        // Mensaje de la alerta
      icon: "<%= alertIcon %>",           // Tipo de ícono: success, error, warning, info
      showConfirmButton: <%= showConfirmButton %>, // Mostrar o no el botón de confirmación
      timer: <%= timer %>                 // Duración de la alerta (ms)
    }).then(() => {
      <% if (typeof ruta !== 'undefined' && ruta !== '') { %>
        window.location = "<%= ruta %>";  // Redirecciona a una ruta específica si se definió
      <% } else { %>
        window.location = "/";            // Redirecciona a la raíz por defecto
      <% } %>
    });
  </script>
  <% } %>

</body>
</html>

